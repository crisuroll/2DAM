package ej4;

import java.io.BufferedWriter;
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.StandardOpenOption;
import java.util.List;
import java.util.Scanner;

public class Main {

	public static void main(String[] args) {
		
		Scanner sc = new Scanner(System.in);
		String nomFich = "ej4.txt";
		Path p = Path.of(nomFich);
		File fichero = new File(nomFich);
		int op = 0;
		String command = "";
		
		try {
			BufferedWriter bw = Files.newBufferedWriter(p, StandardOpenOption.APPEND);
			System.out.println("=== Historial de Comandos ===\n");
			
			while (op != 3) {
				System.out.println("¿Qué deseas hacer?\n1. Escribir un nuevo comando\2. Leer el historial de comandos\n3. Salir\n");
				System.out.println("Opción: ");
				op = sc.nextInt();
				
				switch(op) {
				case 1:
					try {
						if(!Files.exists(p)) {
							fichero.createNewFile();
						}
						System.out.println("Escribe un comando: ");
						command = sc.nextLine();
						bw.write(command);
						System.out.println("Comando guardado en el historial.");
						
					} catch (IOException e) {
						System.out.println(e.getMessage());
					}

					break;
				case 2:
					try {
						if (!Files.exists(p)) {
							
						}
						System.out.println("=== Historial de Comandos ===\n");
						List<String> lineas = Files.readAllLines(p);
						for (String linea:lineas) {
							System.out.println(linea);
						}
					} catch (IOException e) {
						System.out.println(e.getMessage());
					}
					break;
				case 3:
					System.out.println("Saliendo del programa. Bye!");
					break;
				}
			}
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
